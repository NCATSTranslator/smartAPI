{% extends "main.html" %}
{% block content %}
{% include "header.html" %}
{% raw %}
<div id="docapp" style="height: 100%">
    <div class="container" style="margin-top: 0px;">
        <h2 class="text_h2 center blue-text">
          {{ title }}
        </h2>
        <hr style="border: 1px lightblue solid" />
    </div>
    <!-- START or if no selection is made -->
    <div v-if="!selection" class="center-align container padding20">
        <h3 class="text_h3 blue-text">Do You Have OpenAPI Metadata?</h3>
        <a class="waves-effect waves-light btn blue" @click="select('yes')">YES</a>
        <a class="waves-effect waves-light btn red" @click="select('no')">NO</a>
    </div>
    <!-- if YES ask for version -->
    <div v-if="selection === 'yes' " class="center-align container padding20">
        <h3 class="text_h3 blue-text">Which Version Do You Have?</h3>
        <a class="waves-effect waves-light btn blue" @click="select('2')">Version 2</a>
        <a class="waves-effect waves-light btn blue" @click="select('3')">Version 3</a>
        <a class="waves-effect waves-light btn red" @click="select('')">Start Over</a>
    </div>
    <!-- if NO start from scratch -->
    <div v-if="selection === 'no' " class="center-align container padding20">
        <div class="card-panel white">
            <h3 class="text_h3 blue-text">Start From Scratch</h3>
            <p>Use this editor to write/edit your API metadata. You can start with an existing metadata example below. The editor automatically validates your API metadata and gives a live preview of auto-generated API documentation.</p>
            <p class="blue-text"><b>Metadata Examples</b></p>
            <ul>
                <li class="chip hoverable">
                    <a href="https://github.com/NCATS-Tangerine/translator-api-registry/blob/master/mygene.info/openapi_minimum.yml" target="_blank">mygene.info</a>
                </li>
                <li class="chip hoverable">
                    <a href="https://github.com/NCATS-Tangerine/translator-api-registry/blob/master/myvariant.info/openapi_minimum.yml" target="_blank">myvariant.info</a>
                </li>
            </ul>
            <hr/>
            <a target="_blank" href="http://smart-api.info/editor-oa3/" class="waves-effect waves-light btn-large green pulse hoverable" >API Editor</a>
        </div>
        <div class="card-panel white">
        <p class="blue-text"><b>Additional Information:</b></p>
        <p>This <a target="_blank" href="http://smart-api.info/openapi-gui/">OpenAPI GUI</a> interface can also be useful for creating your API metadata from the scratch. But be aware of that this interface does not support any <a target="_blank" href="https://github.com/SmartAPI/smartAPI-Specification/blob/OpenAPI.next/versions/smartapi-list.md">SmartAPI extensions</a> (those fields with "x-" prefix) we added to the standard OpenAPI v3 specifications. You can of course add extra SmartAPI fields after you export your metadata from the GUI interface to the editor.</p>
        <hr style="border: 1px lightblue solid" />
        <h3 class="text_h3 blue-text">Not What You Are Looking For?</h3>
        <a class="waves-effect waves-light btn red" @click="select('')">Start Over</a>
        </div>
        
    </div>
    <!-- if VERSION 2 -->
    <div v-if="selection === '2' " class="center-align container padding20">
        <div class="card-panel white">
            <h3 class="text_h3 blue-text">Version 2</h3>
            <p>
                If you already have an API metadata document in older Swagger/OpenAPI v2 specification you will need to follow these steps to convert it to the latest OpenAPI v3 format, and then edit it in the editor.
            </p>
            <hr style="border: 1px lightblue solid" />
            <p class="blue-text">
                <b>Step 1</b>
            </p>
            <p>Convert your metadata using one of these two options:</p>
            <a class="waves-effect waves-light btn amber" target="_blank" href="">Converter 1</a>
            <a class="waves-effect waves-light btn amber" target="_blank" href="">Converter 2</a>
            <p class="grey-text">
                <b>Tip:</b> Feel free to play with your API metadata file with the tools we mentioned above, and commit your changes even when they are not fully complete or valid. 
                <br><span class="blue-text">As along as the metadata entry has not been added to the <a class="red-text" href="#yml"><b>API_LIST.yml</b></a> file (see below), you will be fine :-).</span> 
                <br>When you are happy with your metadata, you can now move to the next step to add it to the API_LIST.yml file. 
                <br>A <a target="_blank" href="https://github.com/PriceLab/translator-bigquery-api/blob/6d652ec28d0ae7b893395b3e3c360c9d5b144fe3/app/api/bigquery/endpoints/metadata.py#L115">code snippet</a> to convert <a target="_blank" href="http://flask-restful.readthedocs.io/">flask-restful</a> auto-generated swagger v2 specification to SmartAPI metedata, kindly provided by @JohnCEarls.
            </p>
            <hr style="border: 1px lightblue solid" />
            <p class="blue-text">
                <b>Step 2</b>
            </p>
            <p>Edit your converted metadata using this editor:</p>
            <a class="waves-effect waves-light btn green" target="_blank" href="http://smart-api.info/editor-oa3/">Editor</a>
            <hr style="border: 1px lightblue solid" />
            <p class="blue-text">
                <b>Step 3</b>
            </p>
            <p>Submit your V3 API metadata:</p>
            <a class="waves-effect waves-light btn blue" target="_blank" href="/add_api">Add Your API</a>
            <hr style="border: 1px lightblue solid" />
        </div>
        <div class="card-panel white">
            <p class="blue-text"><b>Submit V2 metadata</b></p>
            <p>
                <i class="material-icons amber-text">hourglass_empty</i> <b class="amber-text">COMING SOON</b>
            </p>
            <a target="_blank" href="http://smart-api.info/editor-oa3/" class="waves-effect waves-light btn red disabled" >Sumbit As IS</a>
        </div>
        <div class="card-panel white" id="yml">
            <h3 class="text_h3 blue-text">API_LIST.yml File</h3>
            <p>
                This is a YAML file at the root of this repo to keep track of all APIs available in this repo. Our SmartAPI application will import all the API metadata based on this file and render an API registry web frontend.
            </p>
            <p>
                For each API, you just need to add a text block like this:
            </p>
            <div class="left-align blue-grey lighten-5">
            <pre>
                <code>
                    - metadata: mygene.info/openapi_minimum.yml
                        translator:
                          - returnjson: true
                            notes: ""
                </code>
            </pre>
            </div>
            <p><b class="blue-text">Metadata</b> Field</p>
            <p>
                The value of this field should be either the URL or the relative path pointing to the API metadata. The API metadata should follow <a target="_blank" href="https://www.openapis.org/">OpenAPI specifications</a>, in either JSON or YAML format. Specifically, we support OpenAPI v3 specification documented <a target="_blank" href="https://github.com/OAI/OpenAPI-Specification/blob/OpenAPI.next/versions/3.0.0.md">here</a>, plus the SmartAPI extensions documented <a target="_blank" href="https://github.com/SmartAPI/OpenAPI-Specification/blob/OpenAPI.next/versions/3.0.0.md">here</a>.
            </p>
            <p><b class="blue-text">Translator</b> Field</p>
            <p>
                This serves as the placeholder for any translator project specific API properties, e.g. adding some API-specific notes.<br>
                How to propose a new translator.* field?<br>
                As we expand our list of APIs, we will need to expand our metadata fields as we needed. To do so, you can:<br>
                <ul>
                    <li>Discuss it with us at our slack channel (<b>#arch-working-group</b>)</li>
                    <li>Open an issue in this repo</li>
                    <li>Submit a pull-request for your modified API_LIST.yml file</li>
                </ul>
            </p>
            <hr style="border: 1px lightblue solid" />
            <h3 class="text_h3 blue-text">Not What You Are Looking For?</h3>
            <a class="waves-effect waves-light btn red" @click="select('')">Start Over</a>
        </div>
    </div>
    <!-- if VERSION 3 -->
    <div v-if="selection === '3' " class="center-align container padding20">
        <div class="card-panel white hoverable">
            <h3 class="text_h3 blue-text">Version 3</h3>
            <hr style="border: 1px lightblue solid" />
            <h2 class="text_h2 blue-text">How To Add Your API</h2>
            <ul class="left-align">
                <li>
                    <i class="material-icons red-text">check</i>
                    First, each API should create a separate folder to host its metadata. The folder "_example_api" provides basic template for adding API metadata, so you can start with copying "_example_api" folder and renaming it to your API name.
                </li>
                <li>
                    <i class="material-icons red-text">check</i>
                    Second, fill in the metadata about your API according to the instruction. Also please refer to the existing examples like <a href="https://github.com/NCATS-Tangerine/translator-api-registry/blob/master/mygene.info/openapi_minimum.yml" target="_blank">mygene.info</a> and <a href="https://github.com/NCATS-Tangerine/translator-api-registry/blob/master/myvariant.info/openapi_minimum.yml" target="_blank">myvariant.info</a> APIs. See more details in the next section.
                </li>
                <li>
                    <i class="material-icons red-text">check</i>
                    Add an entry to <a target="_blank" href="https://github.com/NCATS-Tangerine/translator-api-registry/blob/master/API_LIST.yml">API_LIST.yml</a> file following the existing example. This is the master list of the APIs available in this repo. Our SmartAPI application will import all the API metadata based on this file.
                </li>
            </ul>
            <p>
                If you have the permission, commit your changes to this repo. Otherwise, feel free to submit a pull-request. Please check the "build status" badge above, and make sure it's green after your changes. We run some validation tests in this <a target="_blank" href="https://github.com/NCATS-Tangerine/translator-api-registry/blob/master/tests.py">tests.py</a> for each commit. (Tip: you can run python tests.py locally from the root of this repo to make sure all tests pass before you commit your code.)
            </p>
        </div>
        <div class="card-panel  light-blue lighten-4 hoverable">
            <h3 class="text_h3 blue-text">Ready To Submit Your V3 API Metadata?</h3>
            <a class="waves-effect waves-light btn-large blue pulse" href="/add_api">Add Your API</a>
        </div>
        <div class="card-panel white hoverable">
            <h3 class="text_h3 blue-text">
                <b>CORS</b> Support
            </h3>
            <p>If you want users are able to request your API from the browser, e.g. in a web application, your API should support <a target="_blank" href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing">CORS</a>. We recommend every translator API to support CORS. Depending on your web server (e.g. Apache or Nginx) and/or the web framework (e.g. Django, Flask, Tornado) you use, you can find the relevant instruction to enable CORS for your API <a target="_blank" href="https://enable-cors.org/">here</a>, or via Google.</p>
        </div>
        <div class="card-panel white hoverable">
            <h3 class="text_h3 blue-text flow-text">URIs for annotating input parameters or the response object</h3>
            <p>
                Typically for a JSON-based REST API, we use URIs to annotate both the acceptable parameter value types and the fields from the response data object, both in <a target="_blank" href="https://www.openapis.org/">OpenAPI</a> metdata files and JSON-LD context files.
            </p>
            <p>
                To help you decide which URIs to use, we maintain a <a target="_blank" href="https://github.com/NCATS-Tangerine/translator-api-registry/blob/master/ID_MAPPING.csv">ID_MAPPING.csv</a> file to keep records of all URIs we will use. Feel free to add URIs for additional field types. Please make sure not to break the csv format, as that will break github's nice csv rendering and search features.
            </p>
            <p>
                In general, we like to use the URIs from these repositories (also in that priority order)：
            </p>
            <ol>
                <li class="chip">
                    Identifiers.org
                </li>
                <li class="chip">
                    purl.uniprot.org (?)
                </li>
            </ol>
        </div>
        <div class="card-panel white hoverable">
            <h3 class="text_h3 blue-text">Not What You Are Looking For?</h3>
            <hr style="border: 1px lightblue solid" />
            <a class="waves-effect waves-light btn red" @click="select('')">Start Over</a>
        </div>
    </div>
    <img src="/static/img/banner.png" width="100%" alt="tsri banner">
</div>
{% endraw %}
{% include "footer.html" %}
{% endblock %}

{% block extra_scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.2/vue.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.6/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>

    <script>

        var app = new Vue({
            el: '#docapp',
            data: {
                title: 'Start Guide',
                selection:''
            },
            methods:{
                select: function(input){
                    this.selection= input;
                }
            }
        });
    </script>
{% endblock %}